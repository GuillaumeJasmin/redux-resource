{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 660474b15eb433f996d0","webpack:///./packages/action-creators/src/xhr.js","webpack:///external \"resourceful-redux\"","webpack:///./packages/action-creators/src/index.js","webpack:///external \"querystringify\"","webpack:///external \"xhr\""],"names":["request","buildUrl","uri","options","qs","stringify","cb","params","urlString","url","callback","Promise","resolve","reject","err","res","forEach","method","opts","toUpperCase","performXhr","dispatch","xhrOptions","crudAction","transformData","resourceName","lowercaseCrud","toLowerCase","isValidCrudType","Error","crudType","type","req","body","aborted","statusCode","resources","getState","createResources","xhrOpts","newOptions","readResources","updateResources","deleteResources","xhr"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"resourceful-redux\"), require(\"querystringify\"), require(\"xhr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"resourceful-redux\", \"querystringify\", \"xhr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"resourcefulActionCreators\"] = factory(require(\"resourceful-redux\"), require(\"querystringify\"), require(\"xhr\"));\n\telse\n\t\troot[\"resourcefulActionCreators\"] = factory(root[\"resourceful-redux\"], root[\"querystringify\"], root[\"xhr\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 660474b15eb433f996d0","import xhr from 'xhr';\nimport qs from 'querystringify';\n\n/* eslint no-param-reassign: 'off' */\n\n// This is a small wrapper around `xhr`.\n// It has two improvements:\n//   1. Omit the `cb`, and a Promise will be returned instead\n//   2. Pass a `qs` option for query string support\n\nfunction buildUrl(uri, options) {\n  if (options.qs) {\n    uri += qs.stringify(options.qs, true);\n  }\n  return uri;\n}\n\nexport default function request(uri, options, cb) {\n  let params = {};\n  // This handles the `xhr(options, cb)` syntax\n  if (typeof uri === 'object') {\n    params = uri;\n  }\n  // This handles the `xhr(uri, options, cb)` syntax\n  else if (typeof uri === 'string' && typeof options === 'object') {\n    params = options;\n    params.uri = uri;\n  }\n  // This handles the `xhr(uri, cb)` syntax\n  else {\n    params.uri = uri;\n  }\n\n  // This adds support for the `qs` option\n  const urlString = params.uri ? params.uri : params.url;\n  params.uri = buildUrl(urlString, params);\n\n  let callback;\n  if (typeof options === 'function') {\n    callback = options;\n  } else if (typeof cb === 'function') {\n    callback = cb;\n  }\n\n  // Return the `xhr` if a callback was passed. Otherwise, a Promise is returned\n  if (callback) {\n    return xhr(params, callback);\n  } else {\n    return new Promise((resolve, reject) => {\n      xhr(params, (err, res) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(res);\n        }\n      });\n    });\n  }\n}\n\n// Also grabbed from xhr's source. This adds the convenience APIs;\n// `xhr.get()`, for instance.\n(['get', 'put', 'post', 'patch', 'head', 'delete']).forEach((method) => {\n  request[method === 'delete' ? 'del' : method] = function(uri, options = {}, callback) {\n    const opts = typeof uri === 'string' ? options : uri;\n    opts.method = method.toUpperCase();\n    return request(uri, opts, callback);\n  };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./packages/action-creators/src/xhr.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"resourceful-redux\"\n// module id = 1\n// module chunks = 0","import { actionTypes } from 'resourceful-redux';\nimport xhr from './xhr';\n\nfunction performXhr(dispatch, options) {\n  const {\n    xhrOptions = {},\n    crudAction,\n    transformData,\n    resourceName\n  } = options;\n\n  // Catch common configuration problems in dev\n  if (process.env.NODE_ENV !== 'production') {\n    const { resourceName } = options;\n    const lowercaseCrud = crudAction.toLowerCase();\n    const isValidCrudType =\n      lowercaseCrud === 'update' || lowercaseCrud === 'delete' ||\n      lowercaseCrud === 'read' || lowercaseCrud === 'create';\n    const { url, uri } = xhrOptions;\n\n    if (!resourceName) {\n      throw new Error(\n        `A resourceName was not passed to a Resourceful Redux Action ` +\n        `creator. A resourceName must be passed so that Resourceful Redux ` +\n        `knows which resource slice to update. Refer to the CRUD Actions ` +\n        `guide for more: https://resourceful-redux.js.org/docs/guides/crud-actions.html`\n      )\n    }\n\n    if (!isValidCrudType) {\n      throw new Error(\n        `An invalid \"crudAction\" was passed to a Resourceful Redux action creator. ` +\n        `It must be one of: \"create\", \"read\", \"update\", \"delete\"`\n      );\n    }\n\n    if (!url && !uri) {\n      throw new Error(\n        `No URL was passed to a Resourceful Redux action creator. You must ` +\n        `pass either \"xhrOptions.url\" or \"xhrOptions.uri\". For more, refer to ` +\n        `the Action Creators Extension documentation: ` +\n        `https://resourceful-redux.js.org/docs/extensions/action-creators.html`\n      );\n    }\n  }\n\n  const crudType = crudAction.toUpperCase();\n\n  dispatch({\n    ...options,\n    type: actionTypes[`${crudType}_RESOURCES_PENDING`],\n  });\n\n  const req = xhr(xhrOptions, (err, res, body) => {\n    if (req.aborted) {\n      dispatch({\n        ...options,\n        type: actionTypes[`${crudType}_RESOURCES_NULL`]\n      });\n    } else if (err || res.statusCode >= 400) {\n      dispatch({\n        ...options,\n        type: actionTypes[`${crudType}_RESOURCES_FAILED`],\n        res,\n        err,\n      });\n    } else {\n      let resources;\n      if (transformData) {\n        resources = transformData(body, options);\n      } else {\n        resources = body;\n      }\n\n      dispatch({\n        ...options,\n        type: actionTypes[`${crudType}_RESOURCES_SUCCEEDED`],\n        resources\n      });\n    }\n  });\n\n  return req;\n}\n\nfunction crudAction(options) {\n  return (dispatch, getState) => {\n    let opts;\n    if (typeof options === 'function') {\n      opts = options(getState()) || {};\n    } else {\n      opts = options || {};\n    }\n\n    performXhr(dispatch, options);\n  };\n}\n\nfunction createResources(options = {}) {\n  return (dispatch, getState) => {\n    let opts;\n    if (typeof options === 'function') {\n      opts = options(getState()) || {};\n    } else {\n      opts = options || {};\n    }\n\n    const xhrOpts = opts.xhrOptions || {};\n\n    const newOptions = {\n      crudAction: 'create',\n      ...opts,\n      xhrOptions: {\n        method: 'POST',\n        ...xhrOpts\n      }\n    };\n\n    performXhr(dispatch, newOptions);\n  };\n}\n\nfunction readResources(options = {}) {\n  return (dispatch, getState) => {\n    let opts;\n    if (typeof options === 'function') {\n      opts = options(getState()) || {};\n    } else {\n      opts = options || {};\n    }\n\n    const xhrOpts = opts.xhrOptions || {};\n\n    const newOptions = {\n      crudAction: 'read',\n      ...opts,\n      xhrOptions: {\n        method: 'GET',\n        ...xhrOpts\n      }\n    };\n\n    performXhr(dispatch, newOptions);\n  };\n}\n\nfunction updateResources(options = {}) {\n  return (dispatch, getState) => {\n    let opts;\n    if (typeof options === 'function') {\n      opts = options(getState()) || {};\n    } else {\n      opts = options || {};\n    }\n\n    const xhrOpts = opts.xhrOptions || {};\n\n    const newOptions = {\n      crudAction: 'update',\n      ...opts,\n      xhrOptions: {\n        method: 'PATCH',\n        ...xhrOpts\n      }\n    };\n\n    performXhr(dispatch, newOptions);\n  };\n}\n\nfunction deleteResources(options = {}) {\n  return (dispatch, getState) => {\n    let opts;\n    if (typeof options === 'function') {\n      opts = options(getState()) || {};\n    } else {\n      opts = options || {};\n    }\n\n    const xhrOpts = opts.xhrOptions || {};\n\n    const newOptions = {\n      crudAction: 'delete',\n      ...opts,\n      xhrOptions: {\n        method: 'DELETE',\n        ...xhrOpts\n      }\n    };\n\n    performXhr(dispatch, newOptions);\n  };\n}\n\nexport {\n  xhr, crudAction, createResources, readResources, updateResources,\n  deleteResources\n};\n\n\n\n// WEBPACK FOOTER //\n// ./packages/action-creators/src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystringify\"\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xhr\"\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}